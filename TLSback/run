#!/bin/bash

# echo forlidar | sudo -S ifconfig enp3s0 192.168.1.70 netmask 255.255.255.0

sleep 3

export SENSOR=$(./which_sensor.sh | tail -n 1)

source /opt/ros/kinetic/setup.bash

roscore &

if [[ "$SENSOR" == "OS1" ]]; then
    # roslaunch path/to/os1_ros/os1.launch & 
    echo "ouster"
else
    sleep 3 && roslaunch sbg_driver sbg_ellipseA.launch &
    sleep 3 && roslaunch velodyne_pointcloud VLP16_points.launch &
    sleep 3 && source /home/forlidar/Desktop/TLServer/TLSback/catkin_gps/devel/setup.bash && rosrun gps_listener listenerGPS.py &
fi

sleep 5 && cd /home/forlidar/Desktop/TLServer/TLSback && source /opt/ros/kinetic/setup.bash && python3 app.py &